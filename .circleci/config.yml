version: 2

defaults:
  working_directory: ~/repo
  docker:
    - image: circleci/node:8.9.1

  steps:
    - checkout
    - run:
        name: update-npm
        command: 'sudo npm install -g npm@latest'
    - run:
        name: test
        command: npm run test